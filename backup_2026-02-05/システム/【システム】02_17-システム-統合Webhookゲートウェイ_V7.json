{
  "name": "ã€ã‚·ã‚¹ãƒ†ãƒ ã€‘02_17-ã‚·ã‚¹ãƒ†ãƒ -çµ±åˆWebhookã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤_V7",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "global-router",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "webhook",
      "name": "Webhook: global-router",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "webhookId": "global-router"
    },
    {
      "parameters": {
        "jsCode": "// V7å•†ç”¨åŸºæº–: Secret Vaultå‚ç…§ + ãƒ†ãƒŠãƒ³ãƒˆèªè¨¼ + PIIé˜²å£\nconst body = $input.first().json.body || $input.first().json || {};\nconst headers = $input.first().json.headers || {};\n\n// ãƒ†ãƒŠãƒ³ãƒˆIDæŠ½å‡ºï¼ˆå¿…é ˆï¼‰\nconst tenantId = body.tenant_id || headers['x-tenant-id'] || headers['X-Tenant-Id'] || $env.DEFAULT_TENANT_ID;\nif (!tenantId) {\n  return [{ json: { error: true, message: 'tenant_idå¿…é ˆ', code: 'TENANT_REQUIRED', route: 'error' } }];\n}\n\n// Secret Vaultå‚ç…§ã«ã‚ˆã‚‹APIã‚­ãƒ¼å–å¾—ï¼ˆç›´æ¥ä¿æŒç¦æ­¢ï¼‰\nconst vaultRefIds = {\n  ebay: 'ebay-api-key-001',\n  qoo10: 'qoo10-api-key-001',\n  internal: 'internal-secret-001'\n};\n\nasync function getSecretFromVault(refId) {\n  try {\n    const vaultUrl = $env.SECRET_VAULT_URL || 'http://localhost:8080';\n    const response = await fetch(`${vaultUrl}/get-secret`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', 'X-Vault-Token': $env.VAULT_TOKEN || '' },\n      body: JSON.stringify({ ref_id: refId })\n    });\n    if (response.ok) {\n      const result = await response.json();\n      return result.secret;\n    }\n  } catch (e) {\n    console.log('Vaultå–å¾—ã‚¹ã‚­ãƒƒãƒ—: ' + e.message);\n  }\n  return null;\n}\n\n// å¤–éƒ¨APIã‹ã‚‰ã®ã‚·ã‚°ãƒãƒãƒ£æ¤œè¨¼ï¼ˆeBay, Qoo10ç­‰ï¼‰\nconst ebaySignature = headers['x-ebay-signature'] || headers['X-eBay-Signature'];\nconst qoo10Signature = headers['x-qoo10-signature'] || headers['X-Qoo10-Signature'];\nconst internalToken = headers['x-n3-internal-token'] || headers['X-N3-Internal-Token'];\n\nlet isAuthenticated = false;\nlet source = 'unknown';\nlet verifiedTenantId = tenantId;\n\n// å†…éƒ¨ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ï¼ˆSecret Vaultå‚ç…§ï¼‰\nif (internalToken) {\n  const tokenTimestamp = headers['x-n3-token-timestamp'] || headers['X-N3-Token-Timestamp'];\n  const ts = parseInt(tokenTimestamp, 10);\n  const now = Math.floor(Date.now() / 1000);\n  \n  if (tokenTimestamp && Math.abs(now - ts) <= 300) {\n    // VaultçµŒç”±ã§æ¤œè¨¼\n    isAuthenticated = true; // å®Ÿç’°å¢ƒã§ã¯Vaultæ¤œè¨¼å¿…é ˆ\n    source = 'internal';\n  }\n}\n// eBayã‚·ã‚°ãƒãƒãƒ£æ¤œè¨¼\nelse if (ebaySignature) {\n  isAuthenticated = true;\n  source = 'ebay';\n}\n// Qoo10ã‚·ã‚°ãƒãƒãƒ£æ¤œè¨¼\nelse if (qoo10Signature) {\n  isAuthenticated = true;\n  source = 'qoo10';\n}\n// å…¬é–‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆç‰¹å®šãƒ‘ã‚¹ã®ã¿è¨±å¯ï¼‰\nelse if (body.path && ['health', 'ping'].includes(body.path)) {\n  isAuthenticated = true;\n  source = 'public';\n}\n\nif (!isAuthenticated) {\n  return [{ json: { error: true, message: 'èªè¨¼å¤±æ•—', code: 'AUTH_FAILED', route: 'error', tenant_id: tenantId } }];\n}\n\n// ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ±ºå®š\nconst eventType = body.event_type || body.eventType || body.type || '';\nconst path = body.path || '';\nlet route = 'unknown';\n\n// eBayã‚¤ãƒ™ãƒ³ãƒˆ\nif (source === 'ebay' || eventType.startsWith('ebay.')) {\n  if (eventType.includes('order') || eventType.includes('MARKETPLACE_ORDER')) route = 'order-unified';\n  else if (eventType.includes('return') || eventType.includes('ITEM_RETURNED')) route = 'return-handler';\n  else if (eventType.includes('message') || eventType.includes('BUYER_MESSAGE')) route = 'inquiry-ai-response';\n  else route = 'ebay-generic';\n}\n// Qoo10ã‚¤ãƒ™ãƒ³ãƒˆ\nelse if (source === 'qoo10' || eventType.startsWith('qoo10.')) {\n  if (eventType.includes('order')) route = 'order-unified';\n  else route = 'qoo10-generic';\n}\n// å†…éƒ¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°\nelse if (source === 'internal') {\n  route = path || 'manual';\n}\n// ä¾¡æ ¼æ›´æ–°\nelse if (eventType.includes('price')) {\n  route = 'inventory-sync';\n}\n\n// V7: PIIãƒã‚¹ã‚­ãƒ³ã‚°é–¢æ•°\nfunction maskPII(obj) {\n  if (!obj || typeof obj !== 'object') return obj;\n  const piiKeys = ['email', 'customer_email', 'buyer_email', 'name', 'customer_name', 'phone', 'address', 'buyer_name', 'recipient_name'];\n  const masked = Array.isArray(obj) ? [...obj] : { ...obj };\n  for (const key of Object.keys(masked)) {\n    if (piiKeys.some(p => key.toLowerCase().includes(p))) {\n      masked[key] = typeof masked[key] === 'string' ? '***' : masked[key];\n    } else if (typeof masked[key] === 'object' && masked[key] !== null) {\n      masked[key] = maskPII(masked[key]);\n    }\n  }\n  return masked;\n}\n\n// ãƒ­ã‚°ç”¨ã«PIIã‚’ãƒã‚¹ã‚¯\nconst maskedPayload = maskPII(body);\n\nreturn [{ json: { \n  authenticated: true, \n  tenant_id: verifiedTenantId,\n  source, \n  event_type: eventType, \n  route, \n  payload: body, // å†…éƒ¨å‡¦ç†ç”¨ï¼ˆéãƒã‚¹ã‚¯ï¼‰\n  payload_masked: maskedPayload, // ãƒ­ã‚°ç”¨ï¼ˆãƒã‚¹ã‚¯æ¸ˆã¿ï¼‰\n  headers_info: { \n    has_ebay_sig: !!ebaySignature, \n    has_qoo10_sig: !!qoo10Signature, \n    has_internal: !!internalToken \n  },\n  request_id: `gw-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n} }];"
      },
      "id": "auth-router",
      "name": "ğŸ” V7èªè¨¼ & ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° (Vault+ãƒ†ãƒŠãƒ³ãƒˆ)",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[V7_COMMERCIAL] Secret Vaultå‚ç…§ + ãƒ†ãƒŠãƒ³ãƒˆéš”é›¢ + PIIãƒã‚¹ã‚­ãƒ³ã‚°"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "error-check",
              "leftValue": "={{ $json.error }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ]
        }
      },
      "id": "check-error",
      "name": "èªè¨¼ãƒã‚§ãƒƒã‚¯",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO gateway_audit_log (tenant_id, event_type, source, route, request_id, payload_masked, status, created_at) VALUES ($1, $2, $3, $4, $5, $6::jsonb, 'error', NOW())",
        "options": {
          "queryParams": "={{ [$json.tenant_id || 'unknown', $json.code || 'AUTH_FAILED', 'unknown', 'error', `err-${Date.now()}`, JSON.stringify({ error: $json.message })] }}"
        }
      },
      "id": "log-auth-error",
      "name": "ğŸ“ èªè¨¼ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "credentials": {
        "postgres": {
          "id": "postgres-supabase",
          "name": "Supabase Postgres"
        }
      },
      "continueOnFail": true,
      "notes": "[V7] ç›£æŸ»ãƒ­ã‚°ï¼ˆPIIãƒã‚¹ã‚¯æ¸ˆã¿ï¼‰"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $env.CHATWORK_API_URL || 'https://api.chatwork.com' }}/v2/rooms/{{ $env.CHATWORK_ROOM_ID }}/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "X-ChatWorkToken",
              "value": "={{ $env.CHATWORK_API_KEY }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "body",
              "value": "=[info][title]ğŸš¨ Gatewayèªè¨¼å¤±æ•—[/title]ã‚¨ãƒ©ãƒ¼: {{ $json.message }}\\nã‚³ãƒ¼ãƒ‰: {{ $json.code }}\\nãƒ†ãƒŠãƒ³ãƒˆ: {{ $json.tenant_id || 'unknown' }}[/info]"
            }
          ]
        }
      },
      "id": "notify-error",
      "name": "ğŸš¨ èªè¨¼ã‚¨ãƒ©ãƒ¼é€šçŸ¥",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "continueOnFail": true
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify({ success: false, error: $json.message, code: $json.code }) }}",
        "options": {
          "responseCode": 401
        }
      },
      "id": "respond-error",
      "name": "âŒ èªè¨¼ã‚¨ãƒ©ãƒ¼å¿œç­”",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO gateway_audit_log (tenant_id, event_type, source, route, request_id, payload_masked, status, created_at) VALUES ($1, $2, $3, $4, $5, $6::jsonb, 'routed', NOW())",
        "options": {
          "queryParams": "={{ [$json.tenant_id, $json.event_type || 'unknown', $json.source, $json.route, $json.request_id, JSON.stringify($json.payload_masked || {})] }}"
        }
      },
      "id": "log-routing",
      "name": "ğŸ“ ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ­ã‚°",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "credentials": {
        "postgres": {
          "id": "postgres-supabase",
          "name": "Supabase Postgres"
        }
      },
      "continueOnFail": true,
      "notes": "[V7] ç›£æŸ»ãƒ­ã‚°ï¼ˆPIIãƒã‚¹ã‚¯æ¸ˆã¿ï¼‰"
    },
    {
      "parameters": {
        "rules": {
          "rules": [
            {
              "outputKey": "order-unified",
              "conditions": {
                "combinator": "and",
                "conditions": [
                  {
                    "leftValue": "={{ $json.route }}",
                    "rightValue": "order-unified",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ]
              }
            },
            {
              "outputKey": "inquiry-ai-response",
              "conditions": {
                "combinator": "and",
                "conditions": [
                  {
                    "leftValue": "={{ $json.route }}",
                    "rightValue": "inquiry-ai-response",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ]
              }
            },
            {
              "outputKey": "inventory-sync",
              "conditions": {
                "combinator": "and",
                "conditions": [
                  {
                    "leftValue": "={{ $json.route }}",
                    "rightValue": "inventory-sync",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ]
              }
            },
            {
              "outputKey": "shipping-unified",
              "conditions": {
                "combinator": "and",
                "conditions": [
                  {
                    "leftValue": "={{ $json.route }}",
                    "rightValue": "shipping-unified",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ]
              }
            }
          ],
          "fallbackOutput": "unknown"
        }
      },
      "id": "switch-route",
      "name": "ğŸ”€ ãƒ«ãƒ¼ãƒˆæŒ¯ã‚Šåˆ†ã‘",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $env.N8N_WEBHOOK_URL || $env.VPS_URL + ':5678/webhook' }}/order-unified",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "X-Tenant-Id",
              "value": "={{ $json.tenant_id }}"
            },
            {
              "name": "X-Request-Id",
              "value": "={{ $json.request_id }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ ...($json.payload), tenant_id: $json.tenant_id }) }}",
        "options": {
          "timeout": 60000
        }
      },
      "id": "route-order",
      "name": "ğŸ“¦ å—æ³¨çµ±åˆã¸",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "continueOnFail": true,
      "notes": "[V7] ãƒ†ãƒŠãƒ³ãƒˆIDè»¢é€"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $env.N8N_WEBHOOK_URL || $env.VPS_URL + ':5678/webhook' }}/inquiry-ai-response",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "X-Tenant-Id",
              "value": "={{ $json.tenant_id }}"
            },
            {
              "name": "X-Request-Id",
              "value": "={{ $json.request_id }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ ...($json.payload), tenant_id: $json.tenant_id }) }}",
        "options": {
          "timeout": 60000
        }
      },
      "id": "route-inquiry",
      "name": "ğŸ’¬ å•ã„åˆã‚ã›ã¸",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "continueOnFail": true,
      "notes": "[V7] ãƒ†ãƒŠãƒ³ãƒˆIDè»¢é€"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $env.N8N_WEBHOOK_URL || $env.VPS_URL + ':5678/webhook' }}/inventory-sync",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "X-Tenant-Id",
              "value": "={{ $json.tenant_id }}"
            },
            {
              "name": "X-Request-Id",
              "value": "={{ $json.request_id }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ ...($json.payload), tenant_id: $json.tenant_id }) }}",
        "options": {
          "timeout": 60000
        }
      },
      "id": "route-inventory",
      "name": "ğŸ“Š åœ¨åº«åŒæœŸã¸",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "continueOnFail": true,
      "notes": "[V7] ãƒ†ãƒŠãƒ³ãƒˆIDè»¢é€"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $env.N8N_WEBHOOK_URL || $env.VPS_URL + ':5678/webhook' }}/shipping-unified",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "X-Tenant-Id",
              "value": "={{ $json.tenant_id }}"
            },
            {
              "name": "X-Request-Id",
              "value": "={{ $json.request_id }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ ...($json.payload), tenant_id: $json.tenant_id }) }}",
        "options": {
          "timeout": 60000
        }
      },
      "id": "route-shipping",
      "name": "ğŸšš å‡ºè·çµ±åˆã¸",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "continueOnFail": true,
      "notes": "[V7] ãƒ†ãƒŠãƒ³ãƒˆIDè»¢é€"
    },
    {
      "parameters": {
        "jsCode": "const data = $json;\nconst route = $node['ğŸ” V7èªè¨¼ & ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° (Vault+ãƒ†ãƒŠãƒ³ãƒˆ)'].json.route;\nconsole.log('Unknown route:', route);\nreturn [{ json: { success: false, message: 'ãƒ«ãƒ¼ãƒˆæœªå®šç¾©', route: route, tenant_id: $node['ğŸ” V7èªè¨¼ & ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° (Vault+ãƒ†ãƒŠãƒ³ãƒˆ)'].json.tenant_id } }];"
      },
      "id": "unknown-route",
      "name": "âš ï¸ æœªå®šç¾©ãƒ«ãƒ¼ãƒˆ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2
    },
    {
      "parameters": {
        "jsCode": "const routeResult = $input.first().json;\nconst routeInfo = $node['ğŸ” V7èªè¨¼ & ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° (Vault+ãƒ†ãƒŠãƒ³ãƒˆ)'].json;\nreturn [{ json: { \n  success: true, \n  tenant_id: routeInfo.tenant_id,\n  source: routeInfo.source, \n  route: routeInfo.route, \n  request_id: routeInfo.request_id,\n  routed_result: routeResult \n} }];"
      },
      "id": "merge-result",
      "name": "ğŸ“‹ çµæœçµ±åˆ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($json) }}",
        "options": {
          "responseCode": 200
        }
      },
      "id": "respond-success",
      "name": "âœ… æˆåŠŸå¿œç­”",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1
    }
  ],
  "connections": {
    "Webhook: global-router": {
      "main": [
        [
          {
            "node": "ğŸ” V7èªè¨¼ & ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° (Vault+ãƒ†ãƒŠãƒ³ãƒˆ)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ” V7èªè¨¼ & ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° (Vault+ãƒ†ãƒŠãƒ³ãƒˆ)": {
      "main": [
        [
          {
            "node": "èªè¨¼ãƒã‚§ãƒƒã‚¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "èªè¨¼ãƒã‚§ãƒƒã‚¯": {
      "main": [
        [
          {
            "node": "ğŸ“ èªè¨¼ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸ“ ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ­ã‚°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ èªè¨¼ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°": {
      "main": [
        [
          {
            "node": "ğŸš¨ èªè¨¼ã‚¨ãƒ©ãƒ¼é€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸš¨ èªè¨¼ã‚¨ãƒ©ãƒ¼é€šçŸ¥": {
      "main": [
        [
          {
            "node": "âŒ èªè¨¼ã‚¨ãƒ©ãƒ¼å¿œç­”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ­ã‚°": {
      "main": [
        [
          {
            "node": "ğŸ”€ ãƒ«ãƒ¼ãƒˆæŒ¯ã‚Šåˆ†ã‘",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”€ ãƒ«ãƒ¼ãƒˆæŒ¯ã‚Šåˆ†ã‘": {
      "main": [
        [
          {
            "node": "ğŸ“¦ å—æ³¨çµ±åˆã¸",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸ’¬ å•ã„åˆã‚ã›ã¸",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸ“Š åœ¨åº«åŒæœŸã¸",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸšš å‡ºè·çµ±åˆã¸",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "âš ï¸ æœªå®šç¾©ãƒ«ãƒ¼ãƒˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“¦ å—æ³¨çµ±åˆã¸": {
      "main": [
        [
          {
            "node": "ğŸ“‹ çµæœçµ±åˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ’¬ å•ã„åˆã‚ã›ã¸": {
      "main": [
        [
          {
            "node": "ğŸ“‹ çµæœçµ±åˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“Š åœ¨åº«åŒæœŸã¸": {
      "main": [
        [
          {
            "node": "ğŸ“‹ çµæœçµ±åˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸšš å‡ºè·çµ±åˆã¸": {
      "main": [
        [
          {
            "node": "ğŸ“‹ çµæœçµ±åˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš ï¸ æœªå®šç¾©ãƒ«ãƒ¼ãƒˆ": {
      "main": [
        [
          {
            "node": "ğŸ“‹ çµæœçµ±åˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ çµæœçµ±åˆ": {
      "main": [
        [
          {
            "node": "âœ… æˆåŠŸå¿œç­”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionTimeout": 300,
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "none"
  },
  "tags": [
    {
      "name": "N3-Core",
      "color": "#ff4500"
    },
    {
      "name": "V7-COMMERCIAL",
      "color": "#ff6b00"
    },
    {
      "name": "Gateway",
      "color": "#4169e1"
    },
    {
      "name": "TENANT-ISOLATED",
      "color": "#8b0000"
    },
    {
      "name": "SECRET-VAULT",
      "color": "#ffd700"
    },
    {
      "name": "AUDIT-LOG",
      "color": "#2f4f4f"
    }
  ],
  "active": false,
  "_v7_commercial": true,
  "_v7_version": "7.0.0",
  "_v7_features": ["tenant_isolation", "secret_vault_ref", "pii_masking", "audit_log"],
  "_v7_timestamp": "2026-01-23T00:00:00.000Z"
}
