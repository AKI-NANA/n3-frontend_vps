{
  "name": "ã€ãã®ä»–ã€‘08_180-ç›£ä¿®UI-ã‚¨ãƒƒã‚»ãƒ³ã‚¹æ³¨å…¥-å³¶ä¸»ä¸€è¨€åˆæˆ_V5",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "audit-essence-inject",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "webhook",
      "name": "Webhook: essence-inject",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "webhookId": "audit-essence-inject"
    },
    {
      "parameters": {
        "jsCode": "// ============================================================================\n// N3-180: ç›£ä¿®UIã‚¨ãƒƒã‚»ãƒ³ã‚¹æ³¨å…¥ - é‰„ã®æŸæº–æ‹ \n// ç›£ä¿®è€…ï¼ˆå³¶ä¸»ï¼‰ãŒ1æ¬¡æƒ…å ±ãƒ»ã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚’å‹•ç”»ã«æ³¨å…¥ã™ã‚‹ãŸã‚ã®API\n// ============================================================================\n\nconst apiUrl = $env.N3_API_URL || $env.API_BASE_URL;\nconst elevenlabsKey = $env.ELEVENLABS_API_KEY;\n\nif (!apiUrl) {\n  return [{ json: { error: true, message: 'N3_API_URLç’°å¢ƒå¤‰æ•°ãŒæœªè¨­å®š', code: 'CONFIG_ERROR' } }];\n}\n\nconst body = $input.first().json.body || $input.first().json || {};\n\n// å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿\nconst contentId = body.content_id;\nconst managerId = body.manager_id; // ç›£ä¿®è€…IDï¼ˆå³¶ä¸»ï¼‰\nconst essenceText = body.essence_text; // ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›\nconst essenceAudioUrl = body.essence_audio_url; // éŸ³å£°éŒ²éŸ³URLï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰\nconst insertPosition = body.insert_position || 'end'; // start, end, custom, auto\nconst customTimestamp = body.custom_timestamp; // insertPosition=customæ™‚ã«ä½¿ç”¨ï¼ˆç§’ï¼‰\nconst essenceType = body.essence_type || 'insight'; // insight, correction, emphasis, warning\n\n// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\nif (!contentId || !managerId) {\n  return [{ json: { error: true, message: 'content_id, manager_id ã¯å¿…é ˆ', code: 'MISSING_PARAM' } }];\n}\nif (!essenceText && !essenceAudioUrl) {\n  return [{ json: { error: true, message: 'essence_text ã¾ãŸã¯ essence_audio_url ãŒå¿…è¦', code: 'MISSING_PARAM' } }];\n}\n\n// ã‚¨ãƒƒã‚»ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—åˆ¥ã®æ¼”å‡ºè¨­å®š\nconst essenceConfig = {\n  insight: {\n    bgm_ducking: -12, // dB\n    overlay_style: 'highlight_box',\n    voice_stability: 0.7,\n    voice_style: 0.3,\n    intro_text: 'ã€ç›£ä¿®è€…ã‚ˆã‚Šã€‘',\n    color: '#4CAF50'\n  },\n  correction: {\n    bgm_ducking: -15,\n    overlay_style: 'warning_stripe',\n    voice_stability: 0.8,\n    voice_style: 0.1,\n    intro_text: 'ã€è¨‚æ­£ã€‘',\n    color: '#FF9800'\n  },\n  emphasis: {\n    bgm_ducking: -10,\n    overlay_style: 'pulse_glow',\n    voice_stability: 0.5,\n    voice_style: 0.5,\n    intro_text: 'ã€é‡è¦ãƒã‚¤ãƒ³ãƒˆã€‘',\n    color: '#2196F3'\n  },\n  warning: {\n    bgm_ducking: -18,\n    overlay_style: 'alert_flash',\n    voice_stability: 0.9,\n    voice_style: 0.0,\n    intro_text: 'ã€æ³¨æ„ã€‘',\n    color: '#F44336'\n  }\n};\n\nconst config = essenceConfig[essenceType] || essenceConfig.insight;\n\nreturn [{\n  json: {\n    content_id: contentId,\n    manager_id: managerId,\n    essence_text: essenceText,\n    essence_audio_url: essenceAudioUrl,\n    insert_position: insertPosition,\n    custom_timestamp: customTimestamp,\n    essence_type: essenceType,\n    config: config,\n    api_url: apiUrl,\n    has_elevenlabs: !!elevenlabsKey,\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "init",
      "name": "ğŸ” åˆæœŸåŒ–ï¼ˆé‰„ã®æŸæº–æ‹ ï¼‰",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[PYTHON_MIGRATION_CANDIDATE]"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "error-check",
              "leftValue": "={{ $json.error }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ]
        }
      },
      "id": "check-error",
      "name": "ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify({ success: false, error: $json.message, code: $json.code }) }}",
        "options": {
          "responseCode": 400
        }
      },
      "id": "respond-error",
      "name": "ã‚¨ãƒ©ãƒ¼å¿œç­”",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT cm.content_id, cm.channel_id, cm.title, cm.script_data, cm.audio_url, cm.video_url, cm.status, cm.duration_seconds, ch.manager_id as channel_manager FROM content_master cm JOIN channels ch ON cm.channel_id = ch.channel_id WHERE cm.content_id = $1",
        "options": {
          "queryParams": "={{ [$json.content_id] }}"
        }
      },
      "id": "get-content",
      "name": "ğŸ“‹ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "credentials": {
        "postgres": {
          "id": "postgres-supabase",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// ============================================================================\n// ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ¤œè¨¼ & æ¨©é™ãƒã‚§ãƒƒã‚¯\n// ============================================================================\n\nconst initData = $node['ğŸ” åˆæœŸåŒ–ï¼ˆé‰„ã®æŸæº–æ‹ ï¼‰'].json;\nconst content = $input.first().json;\n\nif (!content || !content.content_id) {\n  return [{ json: { error: true, message: 'ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', code: 'NOT_FOUND' } }];\n}\n\n// æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆç›£ä¿®è€…ãŒã“ã®ãƒãƒ£ãƒ³ãƒãƒ«ã®æ‹…å½“ã‹ï¼‰\n// å®Ÿéš›ã®é‹ç”¨ã§ã¯ã‚ˆã‚Šå³å¯†ãªæ¨©é™ç®¡ç†ãŒå¿…è¦\nif (content.channel_manager !== initData.manager_id) {\n  // è­¦å‘Šãƒ­ã‚°ã‚’æ®‹ã™ãŒã€å‡¦ç†ã¯ç¶šè¡Œï¼ˆç®¡ç†è€…ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰å¯èƒ½ï¼‰\n  console.log(`Warning: Manager ${initData.manager_id} is not the assigned manager for channel`);\n}\n\nreturn [{\n  json: {\n    ...initData,\n    content: content,\n    needs_voice_generation: !initData.essence_audio_url && initData.essence_text\n  }\n}];"
      },
      "id": "validate-content",
      "name": "âœ… ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ¤œè¨¼",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[PYTHON_MIGRATION_CANDIDATE]"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "needs-voice",
              "leftValue": "={{ $json.needs_voice_generation }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ]
        }
      },
      "id": "check-needs-voice",
      "name": "éŸ³å£°ç”Ÿæˆå¿…è¦ï¼Ÿ",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2
    },
    {
      "parameters": {
        "jsCode": "// ============================================================================\n// å³¶ä¸»ä¸€è¨€åˆæˆ - ãƒã‚¤ã‚ªãƒ¢ã‚¸ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨\n// GeminiæŒ‡ç¤º: ãƒ”ãƒƒãƒÂ±0.2%ãƒ©ãƒ³ãƒ€ãƒ åŒ–ã€å¥èª­ç‚¹ãƒãƒ¼ã‚º0.05-0.15s\n// ============================================================================\n\nconst data = $input.first().json;\nconst config = data.config;\nlet text = data.essence_text;\n\n// 1. ã‚¤ãƒ³ãƒˆãƒ­ãƒ†ã‚­ã‚¹ãƒˆè¿½åŠ \ntext = config.intro_text + ' ' + text;\n\n// 2. å¥èª­ç‚¹å¾Œã®ãƒãƒ¼ã‚ºã‚’ãƒ©ãƒ³ãƒ€ãƒ åŒ–ï¼ˆ0.05-0.15ç§’ï¼‰\n// ElevenLabsã®<break>ã‚¿ã‚°ã‚’ä½¿ç”¨\ntext = text.replace(/([ã€‚ï¼ï¼Ÿ])/g, (match) => {\n  const pauseMs = Math.floor(50 + Math.random() * 100); // 50-150ms\n  return match + `<break time=\"${pauseMs}ms\"/>`;\n});\n\ntext = text.replace(/([ã€])/g, (match) => {\n  const pauseMs = Math.floor(30 + Math.random() * 70); // 30-100ms\n  return match + `<break time=\"${pauseMs}ms\"/>`;\n});\n\n// 3. æ¯ç¶™ããƒãƒ¼ã‚«ãƒ¼æŒ¿å…¥ï¼ˆ30%ã®ç¢ºç‡ï¼‰\ntext = text.replace(/([ã€‚])/g, (match, offset, string) => {\n  if (Math.random() < 0.3) {\n    return `<break time=\"200ms\"/>` + match;\n  }\n  return match;\n});\n\nreturn [{\n  json: {\n    ...data,\n    processed_text: text,\n    voice_settings: {\n      stability: config.voice_stability,\n      similarity_boost: 0.8,\n      style: config.voice_style,\n      use_speaker_boost: true\n    }\n  }\n}];"
      },
      "id": "prepare-voice",
      "name": "ğŸ™ï¸ å³¶ä¸»ä¸€è¨€æº–å‚™",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[PYTHON_MIGRATION_CANDIDATE]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.elevenlabs.io/v1/text-to-speech/{{ $env.ELEVENLABS_MANAGER_VOICE_ID || 'EXAVITQu4vr4xnSDxMaL' }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Accept",
              "value": "audio/mpeg"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ text: $json.processed_text, model_id: 'eleven_multilingual_v2', voice_settings: $json.voice_settings }) }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          },
          "timeout": 120000
        }
      },
      "id": "elevenlabs-api",
      "name": "ğŸ”Š ElevenLabséŸ³å£°ç”Ÿæˆ",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "credentials": {
        "httpHeaderAuth": {
          "id": "elevenlabs-auth",
          "name": "ElevenLabs API Key"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "jsCode": "// ============================================================================\n// éŸ³å£°çµæœå‡¦ç† & ãƒ”ãƒƒãƒå¾®èª¿æ•´ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç”Ÿæˆ\n// GeminiæŒ‡ç¤º: èªå°¾ãƒ”ãƒƒãƒÂ±0.2%ãƒ©ãƒ³ãƒ€ãƒ åŒ–\n// ============================================================================\n\nconst response = $input.first();\nconst prevData = $node['ğŸ™ï¸ å³¶ä¸»ä¸€è¨€æº–å‚™'].json;\n\n// ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯\nif (response.json?.error || response.json?.detail) {\n  return [{\n    json: {\n      ...prevData,\n      voice_generated: false,\n      voice_error: response.json?.detail || 'ElevenLabs API Error'\n    }\n  }];\n}\n\n// ãƒ”ãƒƒãƒå¾®èª¿æ•´ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆFFmpegã§å¾Œå‡¦ç†ç”¨ï¼‰\n// Â±0.2% = 0.998 ~ 1.002\nconst pitchVariation = 0.998 + (Math.random() * 0.004);\n\nreturn [{\n  json: {\n    ...prevData,\n    voice_generated: true,\n    audio_size: response.binary?.data?.fileSize || 0,\n    pitch_adjustment: pitchVariation,\n    ffmpeg_filter: `asetrate=44100*${pitchVariation},aresample=44100`\n  },\n  binary: response.binary\n}];"
      },
      "id": "process-voice",
      "name": "ğŸ“‹ éŸ³å£°å‡¦ç†",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[PYTHON_MIGRATION_CANDIDATE]"
    },
    {
      "parameters": {
        "jsCode": "// ============================================================================\n// æŒ¿å…¥ä½ç½®è¨ˆç®—\n// auto: AIãŒæœ€é©ãªä½ç½®ã‚’åˆ¤æ–­ï¼ˆé–¢é€£ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å‰å¾Œï¼‰\n// ============================================================================\n\nconst data = $input.first().json;\nconst content = data.content;\nconst duration = content.duration_seconds || 60;\n\nlet insertTimestamp;\n\nswitch (data.insert_position) {\n  case 'start':\n    insertTimestamp = 3; // 3ç§’å¾Œï¼ˆã‚¤ãƒ³ãƒˆãƒ­å¾Œï¼‰\n    break;\n  case 'end':\n    insertTimestamp = Math.max(duration - 10, duration * 0.9); // çµ‚ã‚ã‚Š10ç§’å‰\n    break;\n  case 'custom':\n    insertTimestamp = data.custom_timestamp || duration / 2;\n    break;\n  case 'auto':\n  default:\n    // ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ‡ãƒ¼ã‚¿ã‹ã‚‰é–¢é€£ç®‡æ‰€ã‚’æ¢ã™ï¼ˆç°¡æ˜“å®Ÿè£…ï¼‰\n    // å®Ÿéš›ã«ã¯AIã§è§£æ\n    insertTimestamp = duration * 0.7; // 70%åœ°ç‚¹ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ\n    break;\n}\n\nreturn [{\n  json: {\n    ...data,\n    insert_timestamp: insertTimestamp,\n    insert_timestamp_formatted: new Date(insertTimestamp * 1000).toISOString().substr(14, 5)\n  }\n}];"
      },
      "id": "calc-position",
      "name": "ğŸ“ æŒ¿å…¥ä½ç½®è¨ˆç®—",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[PYTHON_MIGRATION_CANDIDATE]"
    },
    {
      "parameters": {
        "mode": "combine",
        "mergeByFields": {
          "values": [
            {
              "field1": "content_id",
              "field2": "content_id"
            }
          ]
        },
        "options": {}
      },
      "id": "merge-data",
      "name": "ğŸ”€ ãƒ‡ãƒ¼ã‚¿çµ±åˆ",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO supervisor_insights (content_id, manager_id, essence_type, essence_text, audio_url, insert_timestamp, overlay_config, status, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7::jsonb, 'pending', NOW()) RETURNING insight_id",
        "options": {
          "queryParams": "={{ [$json.content_id, $json.manager_id, $json.essence_type, $json.essence_text, $json.essence_audio_url || null, $json.insert_timestamp, JSON.stringify({ style: $json.config.overlay_style, color: $json.config.color, bgm_ducking: $json.config.bgm_ducking })] }}"
        }
      },
      "id": "save-insight",
      "name": "ğŸ’¾ ã‚¤ãƒ³ã‚µã‚¤ãƒˆä¿å­˜",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "credentials": {
        "postgres": {
          "id": "postgres-supabase",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE content_master SET status = 'essence_pending', updated_at = NOW() WHERE content_id = $1",
        "options": {
          "queryParams": "={{ [$json.content_id] }}"
        }
      },
      "id": "update-status",
      "name": "ğŸ“ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "credentials": {
        "postgres": {
          "id": "postgres-supabase",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const data = $input.first().json;\nconst insightId = $node['ğŸ’¾ ã‚¤ãƒ³ã‚µã‚¤ãƒˆä¿å­˜'].json?.insight_id;\n\nreturn [{\n  json: {\n    success: true,\n    action: 'essence_injected',\n    insight_id: insightId,\n    content_id: data.content_id,\n    manager_id: data.manager_id,\n    essence_type: data.essence_type,\n    insert_position: data.insert_position,\n    insert_timestamp: data.insert_timestamp,\n    voice_generated: data.voice_generated || false,\n    next_step: 'Re-render video with essence overlay',\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "format-response",
      "name": "ğŸ“‹ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[PYTHON_MIGRATION_CANDIDATE]"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($json) }}",
        "options": {
          "responseCode": 200
        }
      },
      "id": "respond-success",
      "name": "âœ… æˆåŠŸå¿œç­”",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "jsCode": "// ğŸ” HMAC SHA256 ç½²åæ¤œè¨¼ (Empire OS v6)\nconst crypto = require('crypto');\n\nconst signature = $request.headers['x-n3-signature'] || $request.headers['X-N3-Signature'];\nconst timestamp = $request.headers['x-n3-timestamp'] || $request.headers['X-N3-Timestamp'];\nconst secret = $env.N8N_HMAC_SECRET;\n\nif (!secret) {\n  throw new Error('ğŸš« N8N_HMAC_SECRET ç’°å¢ƒå¤‰æ•°ãŒæœªè¨­å®šã§ã™');\n}\n\nif (!signature || !timestamp) {\n  throw new Error('ğŸš« ç½²åã¾ãŸã¯ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒæ¬ è½ã—ã¦ã„ã¾ã™');\n}\n\n// ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æœ‰åŠ¹æœŸé™ãƒã‚§ãƒƒã‚¯ (5åˆ†)\nconst now = Date.now();\nconst tsAge = now - parseInt(timestamp);\nif (tsAge > 300000 || tsAge < -30000) {\n  throw new Error('ğŸš« ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒæœŸé™åˆ‡ã‚Œã¾ãŸã¯ä¸æ­£ã§ã™');\n}\n\n// HMACæ¤œè¨¼\nconst bodyString = JSON.stringify($json);\nconst computedHmac = crypto\n  .createHmac('sha256', secret)\n  .update(timestamp + '.' + bodyString)\n  .digest('hex');\n\nif (signature !== computedHmac) {\n  throw new Error('ğŸš« HMACç½²åæ¤œè¨¼å¤±æ•—: ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ');\n}\n\n// æ¤œè¨¼æˆåŠŸ - å…ƒãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾è¿”ã™\nreturn [{ json: $json }];"
      },
      "name": "ğŸ” HMACç½²åæ¤œè¨¼",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[EMPIRE_OS_V6] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åˆ¶æŒ¿å…¥"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{$env.SUPABASE_URL}}/rest/v1/execution_logs",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "apikey",
              "value": "={{$env.SUPABASE_ANON_KEY}}"
            },
            {
              "name": "Authorization",
              "value": "=Bearer {{$env.SUPABASE_SERVICE_ROLE_KEY}}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Prefer",
              "value": "return=minimal"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"workflow_id\": \"{{$workflow.id}}\",\n  \"workflow_name\": \"{{$workflow.name}}\",\n  \"status\": \"success\",\n  \"execution_time_ms\": {{Date.now() - $execution.startedAt.getTime()}},\n  \"error_message\": null,\n  \"executed_at\": \"{{new Date().toISOString()}}\",\n  \"node_count\": {{$workflow.nodes.length}},\n  \"metadata\": {}\n}"
      },
      "name": "ğŸ“Š å®Ÿè¡Œãƒ­ã‚°é€ä¿¡ (æˆåŠŸ)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "continueOnFail": true,
      "notes": "[EMPIRE_OS_V6] ä¸­å¤®ç›£è¦–ãƒ‘ãƒ«ã‚¹"
    }
  ],
  "connections": {
    "Webhook: essence-inject": {
      "main": [
        [
          {
            "node": "ğŸ” HMACç½²åæ¤œè¨¼",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ” åˆæœŸåŒ–ï¼ˆé‰„ã®æŸæº–æ‹ ï¼‰": {
      "main": [
        [
          {
            "node": "ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯": {
      "main": [
        [
          {
            "node": "ã‚¨ãƒ©ãƒ¼å¿œç­”",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸ“‹ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—": {
      "main": [
        [
          {
            "node": "âœ… ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ¤œè¨¼",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âœ… ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ¤œè¨¼": {
      "main": [
        [
          {
            "node": "éŸ³å£°ç”Ÿæˆå¿…è¦ï¼Ÿ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éŸ³å£°ç”Ÿæˆå¿…è¦ï¼Ÿ": {
      "main": [
        [
          {
            "node": "ğŸ™ï¸ å³¶ä¸»ä¸€è¨€æº–å‚™",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸ“ æŒ¿å…¥ä½ç½®è¨ˆç®—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ™ï¸ å³¶ä¸»ä¸€è¨€æº–å‚™": {
      "main": [
        [
          {
            "node": "ğŸ”Š ElevenLabséŸ³å£°ç”Ÿæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”Š ElevenLabséŸ³å£°ç”Ÿæˆ": {
      "main": [
        [
          {
            "node": "ğŸ“‹ éŸ³å£°å‡¦ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ éŸ³å£°å‡¦ç†": {
      "main": [
        [
          {
            "node": "ğŸ”€ ãƒ‡ãƒ¼ã‚¿çµ±åˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ æŒ¿å…¥ä½ç½®è¨ˆç®—": {
      "main": [
        [
          {
            "node": "ğŸ”€ ãƒ‡ãƒ¼ã‚¿çµ±åˆ",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ğŸ”€ ãƒ‡ãƒ¼ã‚¿çµ±åˆ": {
      "main": [
        [
          {
            "node": "ğŸ’¾ ã‚¤ãƒ³ã‚µã‚¤ãƒˆä¿å­˜",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ’¾ ã‚¤ãƒ³ã‚µã‚¤ãƒˆä¿å­˜": {
      "main": [
        [
          {
            "node": "ğŸ“ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°": {
      "main": [
        [
          {
            "node": "ğŸ“‹ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ": {
      "main": [
        [
          {
            "node": "âœ… æˆåŠŸå¿œç­”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ” HMACç½²åæ¤œè¨¼": {
      "main": [
        [
          {
            "node": "ğŸ” åˆæœŸåŒ–ï¼ˆé‰„ã®æŸæº–æ‹ ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionTimeout": 300,
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all"
  },
  "tags": [
    {
      "name": "N3-Media",
      "color": "#9b59b6"
    },
    {
      "name": "V5-PRODUCTION",
      "color": "#00ff00"
    },
    {
      "name": "Supervisor",
      "color": "#e67e22"
    },
    {
      "name": "IronRule",
      "color": "#e74c3c"
    },
    {
      "name": "Empire-OS-V6",
      "color": "#ff4500"
    }
  ],
  "active": false,
  "meta": {
    "description": "N3-180 ç›£ä¿®UIã‚¨ãƒƒã‚»ãƒ³ã‚¹æ³¨å…¥ V5-PRODUCTION - ç›£ä¿®è€…ï¼ˆå³¶ä¸»ï¼‰ãŒ1æ¬¡æƒ…å ±ãƒ»ã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚’å‹•ç”»ã«æ³¨å…¥",
    "version": "5.0",
    "changelog": "2026-01-20: é‰„ã®æŸæº–æ‹ ã€GeminiæŒ‡ç¤ºï¼ˆãƒ”ãƒƒãƒÂ±0.2%ã€å¥èª­ç‚¹ãƒãƒ¼ã‚º0.05-0.15sï¼‰å®Ÿè£…",
    "iron_rules_compliant": [
      "no_hardcoded_urls",
      "query_params_only",
      "no_crypto_require"
    ],
    "gemini_instructions": [
      "pitch_variation_0.2%",
      "pause_randomization_0.05-0.15s"
    ]
  }
}