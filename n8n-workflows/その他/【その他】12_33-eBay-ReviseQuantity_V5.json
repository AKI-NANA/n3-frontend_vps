{
  "name": "ã€ãã®ä»–ã€‘12_33-eBay-ReviseQuantity_V5",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ebay-revise-quantity",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "webhook",
      "name": "Webhook: ebay-revise-quantity",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "webhookId": "ebay-revise-quantity"
    },
    {
      "parameters": {
        "jsCode": "// ========================================\n// V5-PRODUCTION: å†…éƒ¨ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ + ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ + å‹•çš„SiteID\n// cryptoä¾å­˜æ’é™¤ç‰ˆ - å¤–éƒ¨APIå§”è­²\n// ========================================\n\nconst body = $input.first().json.body || $input.first().json;\nconst headers = $input.first().json.headers || {};\n\n// ç’°å¢ƒå¤‰æ•°ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãªã—ï¼‰\nconst apiUrl = $env.N3_API_URL;\nconst secret = $env.N8N_INTERNAL_SECRET;\n\nif (!apiUrl) {\n  return [{ json: { error: true, message: 'N3_API_URL ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“', code: 'CONFIG_ERROR' } }];\n}\n\nif (!secret) {\n  return [{ json: { error: true, message: 'N8N_INTERNAL_SECRET ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“', code: 'CONFIG_ERROR' } }];\n}\n\n// å†…éƒ¨ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ï¼ˆå¤–éƒ¨APIçµŒç”±ï¼‰\nconst internalToken = headers['x-n3-signature'] || headers['X-N3-Signature'];\nconst tokenTimestamp = headers['x-n3-token-timestamp'] || headers['X-N3-Token-Timestamp'];\nconst userId = body.user_id || 'default';\n\nif (internalToken && tokenTimestamp) {\n  try {\n    const verifyResponse = await fetch(`${apiUrl}/api/n8n-auth/verify-internal-token`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ userId, timestamp: tokenTimestamp, token: internalToken })\n    });\n    const verifyResult = await verifyResponse.json();\n    \n    if (!verifyResult.valid) {\n      return [{ json: { error: true, message: 'å†…éƒ¨ãƒˆãƒ¼ã‚¯ãƒ³ãŒç„¡åŠ¹ã¾ãŸã¯æœŸé™åˆ‡ã‚Œã§ã™', code: 'INVALID_TOKEN' } }];\n    }\n  } catch (e) {\n    return [{ json: { error: true, message: 'ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼APIã‚¨ãƒ©ãƒ¼: ' + e.message, code: 'VERIFY_API_ERROR' } }];\n  }\n}\n\nconst itemId = body.itemId || body.item_id;\nconst quantity = body.quantity;\nconst marketplace = body.marketplace || 'ebay_us';\nconst productUpdatedAt = body.product_updated_at || null;\n\nif (!itemId) return [{ json: { error: true, message: 'itemId ãŒå¿…è¦ã§ã™', code: 'MISSING_PARAM' } }];\nif (quantity === undefined || quantity < 0) return [{ json: { error: true, message: 'æœ‰åŠ¹ãª quantity ãŒå¿…è¦ã§ã™', code: 'INVALID_PARAM' } }];\nif (!userId || userId === 'undefined') return [{ json: { error: true, message: 'user_id ãŒå¿…è¦ã§ã™', code: 'MISSING_PARAM' } }];\n\nconst SITE_ID_MAP = {\n  'ebay_us': 0, 'EBAY_US': 0, 'ebay_uk': 3, 'EBAY_UK': 3,\n  'ebay_de': 77, 'EBAY_DE': 77, 'ebay_au': 15, 'EBAY_AU': 15,\n  'ebay_ca': 2, 'EBAY_CA': 2, 'ebay_fr': 71, 'EBAY_FR': 71,\n  'ebay_it': 101, 'EBAY_IT': 101, 'ebay_es': 186, 'EBAY_ES': 186\n};\nconst siteId = SITE_ID_MAP[marketplace] ?? SITE_ID_MAP[marketplace.toLowerCase()] ?? 0;\n\nreturn [{ json: { \n  item_id: itemId, quantity: quantity, marketplace: marketplace, \n  user_id: userId, site_id: siteId, product_updated_at: productUpdatedAt,\n  request_timestamp: new Date().toISOString()\n} }];"
      },
      "id": "validate",
      "name": "ğŸ” å†…éƒ¨ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ + å…¥åŠ›æ¤œè¨¼",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[PYTHON_MIGRATION_CANDIDATE]"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "error-check",
              "leftValue": "={{ $json.error }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ]
        }
      },
      "id": "check-error",
      "name": "ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify({ success: false, error: $json.message, code: $json.code }) }}",
        "options": {
          "responseCode": "={{ $json.code === 'INVALID_TOKEN' ? 403 : ($json.code === 'CONFIG_ERROR' ? 500 : 400) }}"
        }
      },
      "id": "respond-error",
      "name": "ã‚¨ãƒ©ãƒ¼å¿œç­”",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT ma.account_name, ma.api_key_encrypted FROM marketplace_accounts ma WHERE ma.user_id = $1 AND (ma.marketplace_id = $2 OR ma.marketplace_id LIKE 'ebay_%') AND ma.status = 'active' ORDER BY CASE WHEN ma.marketplace_id = $2 THEN 0 ELSE 1 END LIMIT 1",
        "options": {
          "queryParams": "={{ [$json.user_id, $json.marketplace] }}"
        }
      },
      "id": "get-account",
      "name": "ğŸ“¦ ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå–å¾—",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "credentials": {
        "postgres": {
          "id": "postgres-supabase",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// ========================================\n// V5-PRODUCTION: APIã‚­ãƒ¼å‹•çš„å¾©å·\n// cryptoä¾å­˜æ’é™¤ç‰ˆ - å¤–éƒ¨APIå§”è­²\n// ========================================\n\nconst request = $node['ğŸ” å†…éƒ¨ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ + å…¥åŠ›æ¤œè¨¼'].json;\nconst accountResult = $input.first().json;\nconst account = Array.isArray(accountResult) ? accountResult[0] : accountResult;\n\nif (!account || !account.api_key_encrypted) {\n  return [{ json: { ...request, need_legacy_token: true } }];\n}\n\n// ç’°å¢ƒå¤‰æ•°ãƒã‚§ãƒƒã‚¯\nconst apiUrl = $env.N3_API_URL;\nconst secret = $env.N8N_INTERNAL_SECRET;\n\nif (!apiUrl || !secret) {\n  return [{ json: { ...request, need_legacy_token: true, decrypt_error: 'ç’°å¢ƒå¤‰æ•°æœªè¨­å®š' } }];\n}\n\n// å¤–éƒ¨APIã§å¾©å·\ntry {\n  const decryptResponse = await fetch(`${apiUrl}/api/n8n-auth/decrypt-key`, {\n    method: 'POST',\n    headers: { \n      'Content-Type': 'application/json',\n      'X-N8N-Secret': secret\n    },\n    body: JSON.stringify({ \n      encryptedValue: account.api_key_encrypted,\n      userId: request.user_id\n    })\n  });\n  \n  if (!decryptResponse.ok) {\n    return [{ json: { ...request, need_legacy_token: true, decrypt_error: 'å¾©å·APIå¤±æ•—' } }];\n  }\n  \n  const { decrypted, error } = await decryptResponse.json();\n  \n  if (error || !decrypted) {\n    return [{ json: { ...request, need_legacy_token: true, decrypt_error: error || 'å¾©å·çµæœãªã—' } }];\n  }\n  \n  return [{ json: { ...request, access_token: decrypted, need_legacy_token: false } }];\n} catch (e) {\n  return [{ json: { ...request, need_legacy_token: true, decrypt_error: e.message } }];\n}"
      },
      "id": "decrypt-token",
      "name": "ğŸ”“ APIã‚­ãƒ¼å¾©å·",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[PYTHON_MIGRATION_CANDIDATE]"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "legacy-check",
              "leftValue": "={{ $json.need_legacy_token }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ]
        }
      },
      "id": "check-legacy",
      "name": "ãƒ¬ã‚¬ã‚·ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³è¦å¦",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT access_token FROM ebay_tokens WHERE environment = 'production' AND user_id = $1 ORDER BY expires_at DESC LIMIT 1",
        "options": {
          "queryParams": "={{ [$node['ğŸ” å†…éƒ¨ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ + å…¥åŠ›æ¤œè¨¼'].json.user_id] }}"
        }
      },
      "id": "get-legacy-token",
      "name": "ãƒ¬ã‚¬ã‚·ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ï¼ˆuser_idï¼‰",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "credentials": {
        "postgres": {
          "id": "postgres-supabase",
          "name": "Supabase Postgres"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const request = $node['ğŸ”“ APIã‚­ãƒ¼å¾©å·'].json;\nconst tokenResult = $input.first().json;\nconst token = Array.isArray(tokenResult) ? tokenResult[0] : tokenResult;\n\nif (!token || !token.access_token) {\n  return [{ json: { error: true, message: 'eBayãƒˆãƒ¼ã‚¯ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', code: 'TOKEN_NOT_FOUND' } }];\n}\nreturn [{ json: { ...request, access_token: token.access_token, need_legacy_token: false } }];"
      },
      "id": "merge-legacy",
      "name": "ãƒ¬ã‚¬ã‚·ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ãƒãƒ¼ã‚¸",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "token-error",
              "leftValue": "={{ $json.error }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ]
        }
      },
      "id": "check-token-error",
      "name": "ãƒˆãƒ¼ã‚¯ãƒ³ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify({ success: false, error: $json.message, code: $json.code }) }}",
        "options": {
          "responseCode": 400
        }
      },
      "id": "respond-token-error",
      "name": "ãƒˆãƒ¼ã‚¯ãƒ³ã‚¨ãƒ©ãƒ¼å¿œç­”",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.ebay.com/ws/api.dll",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "X-EBAY-API-SITEID",
              "value": "={{ $json.site_id }}"
            },
            {
              "name": "X-EBAY-API-COMPATIBILITY-LEVEL",
              "value": "1225"
            },
            {
              "name": "X-EBAY-API-CALL-NAME",
              "value": "ReviseInventoryStatus"
            },
            {
              "name": "X-EBAY-API-IAF-TOKEN",
              "value": "={{ $json.access_token }}"
            },
            {
              "name": "Content-Type",
              "value": "text/xml"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "string",
        "body": "=<?xml version=\"1.0\" encoding=\"utf-8\"?><ReviseInventoryStatusRequest xmlns=\"urn:ebay:apis:eBLBaseComponents\"><RequesterCredentials><eBayAuthToken>{{ $json.access_token }}</eBayAuthToken></RequesterCredentials><InventoryStatus><ItemID>{{ $json.item_id }}</ItemID><Quantity>{{ $json.quantity }}</Quantity></InventoryStatus></ReviseInventoryStatusRequest>",
        "options": {
          "timeout": 30000,
          "retry": {
            "attempts": 3,
            "delay": 1000,
            "backoff": "exponential"
          }
        }
      },
      "id": "ebay-revise",
      "name": "ğŸ›’ eBay ReviseInventoryStatus",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "retryOnFail": true,
      "maxTries": 3,
      "continueOnFail": true
    },
    {
      "parameters": {
        "jsCode": "const response = $input.first().json;\nlet requestData;\ntry { requestData = $node['ãƒ¬ã‚¬ã‚·ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ãƒãƒ¼ã‚¸'].json; } catch (e) { requestData = $node['ğŸ”“ APIã‚­ãƒ¼å¾©å·'].json; }\nconst responseStr = typeof response === 'string' ? response : JSON.stringify(response);\nconst ackMatch = responseStr.match(/<Ack>([^<]+)<\\/Ack>/);\nconst errorMatch = responseStr.match(/<LongMessage>([^<]+)<\\/LongMessage>/);\nconst ack = ackMatch ? ackMatch[1] : 'Unknown';\nconst success = ack === 'Success' || ack === 'Warning';\n\nreturn [{ json: { \n  success: success, item_id: requestData.item_id, quantity: requestData.quantity,\n  marketplace: requestData.marketplace, site_id: requestData.site_id, user_id: requestData.user_id,\n  ack: ack, error: success ? null : (errorMatch ? errorMatch[1] : 'eBay APIã‚¨ãƒ©ãƒ¼'),\n  product_updated_at: requestData.product_updated_at\n} }];"
      },
      "id": "parse-response",
      "name": "ğŸ“Š ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[PYTHON_MIGRATION_CANDIDATE]"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "success-check",
              "leftValue": "={{ $json.success }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ]
        }
      },
      "id": "check-success",
      "name": "æˆåŠŸãƒã‚§ãƒƒã‚¯",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "UPDATE marketplace_listings SET last_synced_at = NOW(), updated_at = NOW() WHERE item_id = $1 AND marketplace_id = $2 AND user_id = $3 AND ($4::timestamp IS NULL OR updated_at <= $4::timestamp)",
        "options": {
          "queryParams": "={{ [$json.item_id, $json.marketplace, $json.user_id, $json.product_updated_at || null] }}"
        }
      },
      "id": "record-update",
      "name": "ğŸ“ æ›´æ–°è¨˜éŒ²ï¼ˆæ¥½è¦³çš„ãƒ­ãƒƒã‚¯ï¼‰",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "credentials": {
        "postgres": {
          "id": "postgres-supabase",
          "name": "Supabase Postgres"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO stock_sync_logs (product_master_id, platform, action, old_quantity, new_quantity, success, user_id, created_at) SELECT ml.product_master_id, $1, 'revise_qty', 0, $2, true, $3, NOW() FROM marketplace_listings ml WHERE ml.item_id = $4 AND ml.user_id = $3 LIMIT 1",
        "options": {
          "queryParams": "={{ [$json.marketplace, $json.quantity, $json.user_id, $json.item_id] }}"
        }
      },
      "id": "log-sync",
      "name": "ğŸ“œ åŒæœŸãƒ­ã‚°è¨˜éŒ²ï¼ˆåœ§ç¸®ï¼‰",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "credentials": {
        "postgres": {
          "id": "postgres-supabase",
          "name": "Supabase Postgres"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($node['ğŸ“Š ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æ'].json) }}",
        "options": {
          "responseCode": 200
        }
      },
      "id": "respond-success",
      "name": "âœ… æˆåŠŸå¿œç­”",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($json) }}",
        "options": {
          "responseCode": 400
        }
      },
      "id": "respond-failure",
      "name": "âŒ å¤±æ•—å¿œç­”",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "DELETE FROM stock_sync_logs WHERE created_at < NOW() - INTERVAL '7 days' AND user_id = $1",
        "options": {
          "queryParams": "={{ [$node['ğŸ“Š ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æ'].json.user_id] }}"
        }
      },
      "id": "purge-history",
      "name": "ğŸ—‘ï¸ å±¥æ­´ãƒ‘ãƒ¼ã‚¸ï¼ˆ7æ—¥è¶…ï¼‰",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "credentials": {
        "postgres": {
          "id": "postgres-supabase",
          "name": "Supabase Postgres"
        }
      },
      "continueOnFail": true
    },
    {
      "parameters": {
        "jsCode": "// ğŸ” HMAC SHA256 ç½²åæ¤œè¨¼ (Empire OS v6)\nconst crypto = require('crypto');\n\nconst signature = $request.headers['x-n3-signature'] || $request.headers['X-N3-Signature'];\nconst timestamp = $request.headers['x-n3-timestamp'] || $request.headers['X-N3-Timestamp'];\nconst secret = $env.N8N_HMAC_SECRET;\n\nif (!secret) {\n  throw new Error('ğŸš« N8N_HMAC_SECRET ç’°å¢ƒå¤‰æ•°ãŒæœªè¨­å®šã§ã™');\n}\n\nif (!signature || !timestamp) {\n  throw new Error('ğŸš« ç½²åã¾ãŸã¯ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒæ¬ è½ã—ã¦ã„ã¾ã™');\n}\n\n// ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æœ‰åŠ¹æœŸé™ãƒã‚§ãƒƒã‚¯ (5åˆ†)\nconst now = Date.now();\nconst tsAge = now - parseInt(timestamp);\nif (tsAge > 300000 || tsAge < -30000) {\n  throw new Error('ğŸš« ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒæœŸé™åˆ‡ã‚Œã¾ãŸã¯ä¸æ­£ã§ã™');\n}\n\n// HMACæ¤œè¨¼\nconst bodyString = JSON.stringify($json);\nconst computedHmac = crypto\n  .createHmac('sha256', secret)\n  .update(timestamp + '.' + bodyString)\n  .digest('hex');\n\nif (signature !== computedHmac) {\n  throw new Error('ğŸš« HMACç½²åæ¤œè¨¼å¤±æ•—: ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ');\n}\n\n// æ¤œè¨¼æˆåŠŸ - å…ƒãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾è¿”ã™\nreturn [{ json: $json }];"
      },
      "name": "ğŸ” HMACç½²åæ¤œè¨¼",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "notes": "[EMPIRE_OS_V6] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åˆ¶æŒ¿å…¥"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{$env.SUPABASE_URL}}/rest/v1/execution_logs",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "apikey",
              "value": "={{$env.SUPABASE_ANON_KEY}}"
            },
            {
              "name": "Authorization",
              "value": "=Bearer {{$env.SUPABASE_SERVICE_ROLE_KEY}}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Prefer",
              "value": "return=minimal"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"workflow_id\": \"{{$workflow.id}}\",\n  \"workflow_name\": \"{{$workflow.name}}\",\n  \"status\": \"success\",\n  \"execution_time_ms\": {{Date.now() - $execution.startedAt.getTime()}},\n  \"error_message\": null,\n  \"executed_at\": \"{{new Date().toISOString()}}\",\n  \"node_count\": {{$workflow.nodes.length}},\n  \"metadata\": {}\n}",
        "options": {
          "retry": {
            "attempts": 3,
            "delay": 1000,
            "backoff": "exponential"
          },
          "timeout": 30000
        }
      },
      "name": "ğŸ“Š å®Ÿè¡Œãƒ­ã‚°é€ä¿¡ (æˆåŠŸ)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "continueOnFail": true,
      "notes": "[EMPIRE_OS_V6] ä¸­å¤®ç›£è¦–ãƒ‘ãƒ«ã‚¹"
    }
  ],
  "connections": {
    "Webhook: ebay-revise-quantity": {
      "main": [
        [
          {
            "node": "ğŸ” HMACç½²åæ¤œè¨¼",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ” å†…éƒ¨ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ + å…¥åŠ›æ¤œè¨¼": {
      "main": [
        [
          {
            "node": "ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯": {
      "main": [
        [
          {
            "node": "ã‚¨ãƒ©ãƒ¼å¿œç­”",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸ“¦ ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå–å¾—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“¦ ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå–å¾—": {
      "main": [
        [
          {
            "node": "ğŸ”“ APIã‚­ãƒ¼å¾©å·",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”“ APIã‚­ãƒ¼å¾©å·": {
      "main": [
        [
          {
            "node": "ãƒ¬ã‚¬ã‚·ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³è¦å¦",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ãƒ¬ã‚¬ã‚·ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³è¦å¦": {
      "main": [
        [
          {
            "node": "ãƒ¬ã‚¬ã‚·ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ï¼ˆuser_idï¼‰",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ãƒˆãƒ¼ã‚¯ãƒ³ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ãƒ¬ã‚¬ã‚·ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ï¼ˆuser_idï¼‰": {
      "main": [
        [
          {
            "node": "ãƒ¬ã‚¬ã‚·ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ãƒãƒ¼ã‚¸",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ãƒ¬ã‚¬ã‚·ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ãƒãƒ¼ã‚¸": {
      "main": [
        [
          {
            "node": "ãƒˆãƒ¼ã‚¯ãƒ³ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ãƒˆãƒ¼ã‚¯ãƒ³ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯": {
      "main": [
        [
          {
            "node": "ãƒˆãƒ¼ã‚¯ãƒ³ã‚¨ãƒ©ãƒ¼å¿œç­”",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸ›’ eBay ReviseInventoryStatus",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ›’ eBay ReviseInventoryStatus": {
      "main": [
        [
          {
            "node": "ğŸ“Š ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“Š ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æ": {
      "main": [
        [
          {
            "node": "æˆåŠŸãƒã‚§ãƒƒã‚¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æˆåŠŸãƒã‚§ãƒƒã‚¯": {
      "main": [
        [
          {
            "node": "ğŸ“ æ›´æ–°è¨˜éŒ²ï¼ˆæ¥½è¦³çš„ãƒ­ãƒƒã‚¯ï¼‰",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "âŒ å¤±æ•—å¿œç­”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ æ›´æ–°è¨˜éŒ²ï¼ˆæ¥½è¦³çš„ãƒ­ãƒƒã‚¯ï¼‰": {
      "main": [
        [
          {
            "node": "ğŸ“œ åŒæœŸãƒ­ã‚°è¨˜éŒ²ï¼ˆåœ§ç¸®ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“œ åŒæœŸãƒ­ã‚°è¨˜éŒ²ï¼ˆåœ§ç¸®ï¼‰": {
      "main": [
        [
          {
            "node": "âœ… æˆåŠŸå¿œç­”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âœ… æˆåŠŸå¿œç­”": {
      "main": [
        [
          {
            "node": "ğŸ—‘ï¸ å±¥æ­´ãƒ‘ãƒ¼ã‚¸ï¼ˆ7æ—¥è¶…ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ” HMACç½²åæ¤œè¨¼": {
      "main": [
        [
          {
            "node": "ğŸ” å†…éƒ¨ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ + å…¥åŠ›æ¤œè¨¼",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ—‘ï¸ å±¥æ­´ãƒ‘ãƒ¼ã‚¸ï¼ˆ7æ—¥è¶…ï¼‰": {
      "main": [
        [
          {
            "node": "ğŸ“Š å®Ÿè¡Œãƒ­ã‚°é€ä¿¡ (æˆåŠŸ)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionTimeout": 60,
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all"
  },
  "tags": [
    {
      "name": "N3-eBay",
      "color": "#0064d2"
    },
    {
      "name": "V5-PRODUCTION",
      "color": "#00ff00"
    },
    {
      "name": "Multi-Tenant",
      "color": "#00bfff"
    },
    {
      "name": "No-Crypto",
      "color": "#9932cc"
    },
    {
      "name": "SQL-Safe",
      "color": "#32cd32"
    },
    {
      "name": "Empire-OS-V6",
      "color": "#ff4500"
    }
  ],
  "active": false
}