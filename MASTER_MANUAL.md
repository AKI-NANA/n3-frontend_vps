---
version: "4.1.0"
updated_at: "2026-02-06"
updated_by: "Imperial Nightly Engine v4.0 + Claude"
---

# ğŸ›ï¸ N3 Empire OS â€” MASTER MANUAL v4.1

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

N3 Empire OS ã¯ã€ä»¥ä¸‹ã®ä¸‰ä½ä¸€ä½“ã§å‹•ä½œã™ã‚‹è‡ªå¾‹å‹é–‹ç™ºãƒ»é‹ç”¨åŸºç›¤ã§ã™ã€‚

| å±¤ | ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|----|---------|------|
| **æ†²æ³•** | `governance/CONSTITUTION.md` | æœ€ä¸Šä½ã®è¡Œå‹•åˆ¶é™ãƒ»åˆ¤æ–­åŸºæº–ï¼ˆå…¨30æ¡ï¼‰ |
| **åœ°å›³** | `governance/IMPERIAL_MAP.json` | ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ã®æ©Ÿæ¢°å¯èª­ãƒ«ãƒ¼ãƒ« |
| **ã‚¨ãƒ³ã‚¸ãƒ³** | `governance/imperial-nightly-engine.js` | å¤œé–“è‡ªå¾‹é–‹ç™ºã®åŸ·è¡Œå®˜ï¼ˆv4.0ï¼‰ |

è£œåŠ©æ–‡æ›¸:
- `governance/MASTER_LAW.md` â€” æ³•å…¸ï¼ˆã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ–¹ï¼‰
- `governance/DIRECTORY_MAP.md` â€” åœ°å›³ã®äººé–“å¯èª­ç‰ˆ
- `governance/audit-rules.json` â€” ç›£æŸ»ãƒ«ãƒ¼ãƒ«å®šç¾©
- `governance/self-healing-scope.json` â€” è‡ªå‹•ä¿®å¾©ã®ç®¡è½„å®šç¾©

## 2. ã‚¨ãƒ³ã‚¸ãƒ³ v4.0 ã®æ©Ÿèƒ½ä¸€è¦§

### 2.1 ã‚³ã‚¢æ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ | æ†²æ³•æ¡é … |
|------|------|----------|
| æ†²æ³•æ¤œè¨¼ | èµ·å‹•æ™‚ã« CONSTITUTION.md ã®å­˜åœ¨ã¨ãƒãƒƒã‚·ãƒ¥ã‚’æ¤œè¨¼ã€‚ä¸åœ¨æ™‚ã¯å³åœæ­¢ | ç¬¬18æ¡ç¬¬1é … |
| æ³•å…¸ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼ | MASTER_LAW.md ã®å¤‰æ›´ã‚’æ¤œçŸ¥ã€‚ç†ç”±ä¸æ˜ã®å¤‰æ›´ã¯è­¦å‘Š | ç¬¬18æ¡ç¬¬2é … |
| æ’ä»–åˆ¶å¾¡ | NIGHTLY_ACTIVE.lock ã«ã‚ˆã‚‹ç‰©ç†ãƒ­ãƒƒã‚¯ã€‚01_running ã¯å¸¸ã«1ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ | ç¬¬18æ¡ç¬¬3-4é … |
| ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ | ãƒŸãƒƒã‚·ãƒ§ãƒ³å®Ÿè¡Œå‰ã«å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã€‚å¤±æ•—æ™‚ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ | ç¬¬18æ¡ç¬¬5é … |
| APIã‚¯ã‚©ãƒ¼ã‚¿ | æ—¥æ¬¡20å›/20ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™ã€‚è¶…éæ™‚ã¯queueã«æˆ»ã™ï¼ˆå¤±æ•—ã«ã—ãªã„ï¼‰ | ç¬¬24æ¡ |
| è–åŸŸä¿è­· | PROTECTED_FILES ã¸ã®æ›¸ãè¾¼ã¿ã‚’å³å´ä¸‹ | ç¬¬4æ¡ç¬¬3é … |
| task_indexé€£æº | æœªç™»éŒ²ã‚¿ã‚¹ã‚¯ã¸ã®æ“ä½œã‚’ç¦æ­¢ | ç¬¬7æ¡ç¬¬1é … |

### 2.2 Cç³»åˆ¶å¾¡è»¸ï¼ˆv4.0æ–°æ©Ÿèƒ½ï¼‰

| è»¸ | åç§° | èª¬æ˜ |
|----|------|------|
| **C-1** | Intent Fidelity | ãƒŸãƒƒã‚·ãƒ§ãƒ³æ„å›³ã¨ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã®ä¹–é›¢ã‚’ãƒšãƒŠãƒ«ãƒ†ã‚£åŒ–ã€‚çœç•¥æ¤œçŸ¥ãƒ»æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«éå¤šã‚’æ¤œå‡º |
| **C-2** | æ…¢å¿ƒæ¤œçŸ¥ | confidence_history.json ã®ç›´è¿‘10ä»¶ã§åˆ†æ•£ã‚’è¨ˆç®—ã€‚å¸¸ã«é«˜ã‚¹ã‚³ã‚¢ â†’ æ…¢å¿ƒã¨åˆ¤å®šã— confidence ã‚’ -0.1 |
| **C-3** | partial TTL | partial_human_review çŠ¶æ…‹ãŒ72æ™‚é–“ã‚’è¶…ãˆãŸæ¡ˆä»¶ã‚’è­¦å‘Šã€‚UIä¸Šã«èµ¤è¡¨ç¤º |
| **C-5** | UIè­¦å‘Šãƒ•ãƒ©ã‚° | EXPIRED_PARTIAL, COMPLACENCY_DETECTED, OLLAMA_OFFLINE, C5_NO_BUILD ç­‰ã®è­¦å‘Šã‚’UIå‘ã‘ã«åé›† |
| **C-6** | ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æœ¬ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ï¼ˆMASTER_MANUAL.mdï¼‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ nightly_result.json ã«åˆ»å° |

### 2.3 ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ•ãƒ­ãƒ¼

```
00_queue/ â†’ 01_running/ â†’ [AIç”Ÿæˆ] â†’ [æ¤œå“] â†’ [ç›£æŸ»] â†’ 02_done/ or 03_failed/
                â†“                                           â†“
         NIGHTLY_ACTIVE.lock                    nightly_result.json
```

1. `00_queue/` ã‹ã‚‰è¾æ›¸é †ã§1ä»¶å–ã‚Šå‡ºã— `01_running/` ã«ç§»å‹•
2. ãƒŸãƒƒã‚·ãƒ§ãƒ³.md ã‚’ãƒ‘ãƒ¼ã‚¹ã— task_index.json ã¨ãƒãƒƒãƒãƒ³ã‚°
3. å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ä¿å­˜
4. Claude API ã§ã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆçœç•¥ç¦æ­¢ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä»˜ãï¼‰
5. Ollama/ãƒ­ãƒ¼ã‚«ãƒ«ã§æ¤œå“ï¼ˆã‚µãƒœã‚Šãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»æ§‹æ–‡ï¼‰
6. å¸å›½ç›£æŸ»ï¼ˆaudit-rules.json ã«åŸºã¥ãã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼‰
7. åˆæ ¼æ¡ä»¶: ç›£æŸ»100ç‚¹ + æ¤œå“åˆæ ¼ + Intent Fidelity >= 0.7
8. confidence >= 0.9 â†’ `preview_ready` / < 0.9 â†’ `partial_human_review`
9. ä¸åˆæ ¼ â†’ ãƒªãƒˆãƒ©ã‚¤ï¼ˆæœ€å¤§3å›ï¼‰â†’ å¤±æ•—æ™‚ã¯ `03_failed/` ã¸

### 2.4 ä½¿ç”¨æ–¹æ³•

```bash
# ãƒãƒƒãƒå®Ÿè¡Œï¼ˆé€šå¸¸ã®å¤œé–“ãƒãƒƒãƒï¼‰
node governance/imperial-nightly-engine.js

# ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼ˆAPIå‘¼ã³å‡ºã—ãªã—ï¼‰
node governance/imperial-nightly-engine.js --dry-run

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼‰
node governance/imperial-nightly-engine.js --watch

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
node governance/imperial-nightly-engine.js --status
```

## 3. ãƒŸãƒƒã‚·ãƒ§ãƒ³.md ã®æ›¸å¼

```markdown
# ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«

type: fix           # fix(ä¿®æ­£) or feature(æ–°æ©Ÿèƒ½)
task_key: listing_publish  # task_index.json ã®ã‚­ãƒ¼
priority: high

ãƒ•ã‚¡ã‚¤ãƒ«:
- app/tools/listing-n3/components/tab-final.tsx
- app/api/ebay/publish/route.ts

## è©³ç´°
ã“ã“ã«ä¿®æ­£å†…å®¹ã‚’æ›¸ãã€‚
```

## 4. åˆ¤æ–­åŸºæº–ä¸€è¦§

### ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»

| çŠ¶æ…‹ | æ„å‘³ | æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|------|------|---------------|
| `preview_ready` | ç›£æŸ»åˆæ ¼ãƒ»confidence >= 0.9 | é™›ä¸‹ãŒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèªå¾Œ `npm run unlock-force` |
| `partial_human_review` | ä»®åˆæ ¼ãƒ»confidence < 0.9 | é™›ä¸‹ãŒæ‰¿èª/å»ƒæ£„/å†è©¦è¡Œã‚’åˆ¤æ–­ |
| `failed` | MAX_RETRYè¶…é or è‡´å‘½çš„ã‚¨ãƒ©ãƒ¼ | é™›ä¸‹ãŒåŸå› èª¿æŸ»å¾Œ 00_queue ã«å†é…ç½® |
| `quota_exceeded` | APIä¸Šé™åˆ°é” | ç¿Œæ—¥è‡ªå‹•å†è©¦è¡Œ |
| `blocked` | ãƒ­ãƒƒã‚¯å­˜åœ¨ or æ’ä»–é•å | ãƒ­ãƒƒã‚¯è§£é™¤å¾Œã«å†å®Ÿè¡Œ |
| `dry_run` | ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ | ç¢ºèªã®ã¿ |

### äººé–“æ‰¿èªãŒå¿…è¦ãªå ´é¢ï¼ˆæ†²æ³•ç¬¬16æ¡ï¼‰

1. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼â†’æœ¬ç•ªã®æ˜‡æ ¼ï¼ˆ`npm run unlock-force`ï¼‰
2. partial_human_review ã®åˆ¤æ–­
3. èª²é‡‘ä¸Šé™ã®å¤‰æ›´
4. PROTECTED_FILES ãƒªã‚¹ãƒˆã®å¤‰æ›´
5. MASTER_LAW.md / CONSTITUTION.md ã®æ”¹è¨‚
6. 03_failed ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®å†è©¦è¡Œåˆ¤æ–­
7. æ–°ã—ã„æ¤œå“AIãƒ¢ãƒ‡ãƒ«ã®æ¡ç”¨
8. 50,000å††ä»¥ä¸Šã®å–å¼•ã®æœ€çµ‚å®Ÿè¡Œ
9. partial TTL è¶…éãƒŸãƒƒã‚·ãƒ§ãƒ³ã®å‡¦ç†

## 5. UIï¼ˆEmpire Cockpitï¼‰ã®è¡¨ç¤ºé …ç›®

### System Health ã‚¿ãƒ–ï¼ˆä»»å‹™4ã§å®Ÿè£…ï¼‰

| é …ç›® | è¡¨ç¤ºå†…å®¹ | æ¡ä»¶ä»˜ãè¡¨ç¤º |
|------|---------|-------------|
| æ†²æ³•ãƒãƒƒã‚·ãƒ¥ | CONSTITUTION.md ã® SHA-256 å…ˆé ­16æ–‡å­— | å¸¸æ™‚è¡¨ç¤º |
| ãƒ­ãƒƒã‚¯çŠ¶æ…‹ | ACTIVE / ãªã— | ãƒ­ãƒƒã‚¯æ™‚ã¯èµ¤ |
| APIã‚¯ã‚©ãƒ¼ã‚¿ | æ®‹ã‚Šå›æ•°/ãƒˆãƒ¼ã‚¯ãƒ³ | 80%è¶…ã§é»„è‰²ã€100%ã§èµ¤ |
| æœ€æ–°ãƒŸãƒƒã‚·ãƒ§ãƒ³ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ + task_key | å¸¸æ™‚ |
| UIè­¦å‘Š | ui_warnings ã®å…¨ä»¶ | 1ä»¶ä»¥ä¸Šã§è­¦å‘Šãƒ‘ãƒãƒ«è¡¨ç¤º |
| expired partials | TTLè¶…éæ¡ˆä»¶ãƒªã‚¹ãƒˆ | èµ¤è‰²ã§ç›®ç«‹ãŸã›ã‚‹ |
| confidence | ç¾åœ¨å€¤ + æ…¢å¿ƒè£œæ­£ã®æœ‰ç„¡ | è£œæ­£æ™‚ã¯è£œæ­£å‰ã®å€¤ã‚‚è¡¨ç¤º |
| ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æœ¬ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¸¸æ™‚ |

### ç¦æ­¢ã•ã‚Œã‚‹UIè¡¨ç¾ï¼ˆæ†²æ³•ç¬¬22æ¡ï¼‰

- å…¨é¢ç·‘ã®å®‰å¿ƒè¡¨ç¤ºï¼ˆui_warnings ãŒã‚ã‚‹ã¨ãï¼‰
- ã€Œå®Œäº†ã€ã€ŒæˆåŠŸã€ã®æ–­å®šï¼ˆãƒ“ãƒ«ãƒ‰æ¤œè¨¼æœªå®Ÿæ–½æ™‚ã¯ã€Œä»®åˆæ ¼ã€ï¼‰
- partial_human_review ã®éè¡¨ç¤º
- expired_partials ã®éè¡¨ç¤º

## 6. æ³•å…¸åŒæœŸï¼ˆä»»å‹™5ï¼‰

`MASTER_LAW.md` ã«æ›¸ã‹ã‚ŒãŸãƒ«ãƒ¼ãƒ« â†’ `audit-rules.json` ã®åŒæœŸã¯ `total-empire-audit.js` ãŒæ‹…å½“ã€‚
ãƒ‘ãƒ¼ã‚µãƒ¼ãŒæ³•å…¸ã‹ã‚‰æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠ½å‡ºã—ã€ç›£æŸ»ãƒ«ãƒ¼ãƒ«ã«åæ˜ ã™ã‚‹ã€‚

åŒæœŸã®æµã‚Œ:
1. MASTER_LAW.md ã‚’ãƒ‘ãƒ¼ã‚¹ â†’ ãƒ«ãƒ¼ãƒ«ID + ãƒ‘ã‚¿ãƒ¼ãƒ³ + severity ã‚’æŠ½å‡º
2. audit-rules.json ã¨å·®åˆ†æ¯”è¼ƒ
3. å·®åˆ†ãŒã‚ã‚‹å ´åˆã¯ ui_warnings ã« `LAW_AUDIT_DESYNC` ã‚’è¿½åŠ 
4. è‡ªå‹•ä¿®æ­£ã¯ã—ãªã„ï¼ˆé™›ä¸‹ã®ç¢ºèªãŒå¿…è¦ï¼‰

## 7. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼ˆIMPERIAL_MAP v2.0ï¼‰

```
n3-frontend_new/
â”œâ”€â”€ 01_PRODUCT/        # æœ¬ç•ªã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ 02_DEV_LAB/        # é–‹ç™ºãƒ©ãƒœ
â”‚   â”œâ”€â”€ 01_N8N_HUB/    # n8nãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
â”‚   â”œâ”€â”€ 02_SCRAPYARD/  # ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼
â”‚   â”œâ”€â”€ 03_BACKENDS/   # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ 04_INFRA_CONFIG/ # ã‚¤ãƒ³ãƒ•ãƒ©è¨­å®š
â”‚   â”œâ”€â”€ 05_SKELETONS/  # ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãƒ»æœªåˆ†é¡
â”‚   â”œâ”€â”€ 06_ARCHIVES/   # ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
â”‚   â””â”€â”€ nightly-staging/ # å¤œé–“ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
â”œâ”€â”€ 03_ARCHIVE_STORAGE/ # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
â”œâ”€â”€ src/               # Next.jsã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ public/            # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ governance/        # å¸å›½çµ±æ²»ï¼ˆæœ¬ãƒãƒ‹ãƒ¥ã‚¢ãƒ«å«ã‚€ï¼‰
â”œâ”€â”€ docs/              # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ scripts/           # ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

## 8. æ³•å…¸åŒæœŸï¼ˆLaw-to-Codeï¼‰ã®ä»•çµ„ã¿

### 8.1 ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ¦‚è¦

```
MASTER_LAW.md (```json:rule``` ãƒ–ãƒ­ãƒƒã‚¯)
    â”‚
    â”‚ law-to-code.js ãŒæŠ½å‡º
    â–¼
audit-rules.json (ä¸­é–“ç”Ÿæˆç‰©)
    â”‚
    â”‚ total-empire-audit.js v4.1 ãŒå‹•çš„ãƒãƒ¼ã‚¸
    â–¼
EMPIRE_RULES (ãƒ¡ãƒ¢ãƒªå†…ç›£æŸ»ãƒ«ãƒ¼ãƒ«)
    â”‚
    â”‚ ç›£æŸ»å®Ÿè¡Œ
    â–¼
violations_by_language.json (çµæœå‡ºåŠ›)
```

### 8.2 æ³•å…¸ã¸ã®ãƒ«ãƒ¼ãƒ«è¿½åŠ æ–¹æ³•

`MASTER_LAW.md` ã«ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ ```json:rule``` ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹:

```json:rule
{
  "id": "ãƒ«ãƒ¼ãƒ«ID",
  "lang": "typescript|python|n8n",
  "category": "physical|logical|dimension",
  "name": "ãƒ«ãƒ¼ãƒ«å",
  "pattern": "æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³",
  "flags": "g",
  "severity": "CRITICAL|ERROR|WARNING",
  "autofix": false,
  "description": "èª¬æ˜"
}
```

**å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**: `id`, `lang`, `category`
**physical ã‚«ãƒ†ã‚´ãƒª**: `pattern` + `flags` ã§æ­£è¦è¡¨ç¾ãƒãƒƒãƒ
**logical ã‚«ãƒ†ã‚´ãƒª**: `check_type` (`contains_all`, `contains_any`, `pattern_absent`) + `check_logic`

### 8.3 åŒæœŸã®ç¢ºèªæ–¹æ³•

```bash
# æ‰‹å‹•åŒæœŸï¼ˆæ›¸ãè¾¼ã¿ã‚ã‚Šï¼‰
node governance/law-to-code.js

# å·®åˆ†ãƒã‚§ãƒƒã‚¯ã®ã¿ï¼ˆæ›¸ãè¾¼ã¿ãªã—ï¼‰
node governance/law-to-code.js --check

# ç›£æŸ»å®Ÿè¡Œï¼ˆåŒæœŸã‚‚è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹ï¼‰
node governance/total-empire-audit.js
```

### 8.4 æ³¨æ„äº‹é …

- æ³•å…¸ã‚’æ›¸ãæ›ãˆã‚Œã°ã€æ¬¡å›ç›£æŸ»ã‹ã‚‰å³åº§ã«åæ˜ ã•ã‚Œã‚‹
- `audit-rules.json` ã¯è‡ªå‹•ç”Ÿæˆç‰©ã€‚æ‰‹å‹•ç·¨é›†ã—ã¦ã‚‚æ¬¡å›åŒæœŸæ™‚ã«ä¸Šæ›¸ãã•ã‚Œã‚‹
- MASTER_LAW.md ã¯ PROTECTED_FILESã€‚AIã«ã‚ˆã‚‹ç›´æ¥ç·¨é›†ã¯ç¦æ­¢ï¼ˆçš‡å¸ã®ã¿æ”¹è¨‚å¯èƒ½ï¼‰
- `violations_by_language.json` ã« `law_sync` ãƒ¡ã‚¿æƒ…å ±ãŒå«ã¾ã‚Œã‚‹

## 9. MCP ã®å†èµ·å‹•æ‰‹é †

### 9.1 Claude Desktop ã®å ´åˆ

```bash
# 1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
vim ~/Library/Application\ Support/Claude/claude_desktop_config.json

# 2. mcpServers ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« N3 ãƒ„ãƒ¼ãƒ«ã‚’è¿½åŠ ï¼ˆå‚è€ƒ: governance/mcp-tools-config.jsonï¼‰
# ä»¥ä¸‹ã‚’ mcpServers ã«è²¼ã‚Šä»˜ã‘:
#   "n3-empire-filesystem": {
#     "command": "npx",
#     "args": ["-y", "@anthropic-ai/mcp-filesystem-server", "/Users/aritahiroaki/n3-frontend_new"]
#   }

# 3. Claude Desktop ã‚’å®Œå…¨çµ‚äº†ï¼ˆCmd+Qï¼‰

# 4. å†èµ·å‹•
open -a "Claude"

# 5. MCP æ¥ç¶šç¢ºèª: Claude Desktop ã®è¨­å®šç”»é¢ â†’ MCP ã‚¿ãƒ–ã§æ¥ç¶šçŠ¶æ…‹ã‚’ç¢ºèª
```

### 9.2 Cursor ã®å ´åˆ

```bash
# 1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
vim /Users/aritahiroaki/n3-frontend_new/.cursor/mcp.json

# 2. governance/mcp-tools-config.json ã®å†…å®¹ã‚’å‚è€ƒã«è¨­å®š

# 3. Cursor ã‚’å†èµ·å‹•
```

### 9.3 MCP åˆ©ç”¨å¯èƒ½ãƒ„ãƒ¼ãƒ«ä¸€è¦§

| ãƒ„ãƒ¼ãƒ« | ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|--------|---------|------|
| **get_imperial_map** | `cat governance/IMPERIAL_MAP.json` | å¸å›½åœ°å›³ï¼ˆ7å¤§é ˜åœŸï¼‰ã®å–å¾— |
| **run_organizer** | `node governance/imperial-organizer.js` | é‡è‰¯ãƒ•ã‚¡ã‚¤ãƒ«æ¤œå‡ºãƒ»ç§»é€ |
| **run_audit** | `node governance/total-empire-audit.js` | å…¨è¨€èªç›£æŸ»ï¼ˆLaw-to-CodeåŒæœŸä»˜ãï¼‰ |
| **run_nightly_engine** | `node governance/imperial-nightly-engine.js` | å¤œé–“ãƒãƒƒãƒå®Ÿè¡Œ |
| **get_constitution** | `cat governance/CONSTITUTION.md` | æ†²æ³•30æ¡ã®å–å¾— |
| **get_master_law** | `cat governance/MASTER_LAW.md` | æ³•å…¸ v2.1 ã®å–å¾— |
| **get_task_index** | `cat lib/data/task_index.json` | ã‚¿ã‚¹ã‚¯ç™»éŒ²ç°¿ã®å–å¾— |

### 9.4 ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

| ç—‡çŠ¶ | åŸå›  | å¯¾å‡¦ |
|------|------|------|
| MCPãƒ„ãƒ¼ãƒ«ãŒè¡¨ç¤ºã•ã‚Œãªã„ | Claude Desktopã®å†èµ·å‹•ãŒå¿…è¦ | Cmd+Q â†’ å†èµ·å‹• |
| ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã‚ãªã„ | MCPã®ãƒ‘ã‚¹è¨­å®šãŒé–“é•ã„ | `claude_desktop_config.json` ã®ãƒ‘ã‚¹ã‚’ç¢ºèª |
| `run_audit` ãŒå¤±æ•— | `law-to-code.js` ã®ãƒ‘ã‚¹ã‚¨ãƒ©ãƒ¼ | `node governance/law-to-code.js` ã‚’å˜ä½“å®Ÿè¡Œã—ã¦ç¢ºèª |
| organizer ãŒå¤±æ•— | `IMPERIAL_MAP.json` ä¸åœ¨ | åœ°å›³ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ã‚’ç¢ºèª |

## æ”¹è¨‚å±¥æ­´

| æ—¥ä»˜ | ç‰ˆ | å†…å®¹ |
|------|-----|------|
| 2026-02-06 | v4.1.0 | Law-to-CodeåŒæœŸã®ä»•çµ„ã¿ã€MCPå†èµ·å‹•æ‰‹é †ã€å¸å›½æ•´ç†å®˜ã®èª¬æ˜ã‚’è¿½åŠ  |
| 2026-02-06 | v4.0.0 | åˆç‰ˆã€‚ã‚¨ãƒ³ã‚¸ãƒ³v4.0ã€Cç³»åˆ¶å¾¡è»¸ã€æ†²æ³•30æ¡ã«å¯¾å¿œ |
